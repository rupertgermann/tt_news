###
# This is the default TS setup for the CSS based template
###

## Includes the newsLib:
includeLibs.ts_news = EXT:tt_news/pi/class.tx_ttnews.php

## This enables the tt_content.list item to display the news:

plugin.tt_news >
plugin.tt_news = USER
plugin.tt_news {
  userFunc = tx_ttnews->main_news
  
  # template file
  templateFile = EXT:tt_news/res/tt_news_medialinks.html
  
  # page to get the newsitems from -> "Starting point"
  pid_list = {$plugin.tt_news.pid_list}
     
  # page for the single view
  singlePid = {$plugin.tt_news.singlePid}

  # page id for the archive link in "LATEST" template
  archiveTypoLink.parameter = {$plugin.tt_news.archiveLinkUid}

  
  
  # [depreciated] this is for downwards compatibility (varname changed to "singlePid" in tt_news v 1.6.0) 
  PIDitemDisplay = {$plugin.tt_news.PIDitemDisplay}
  
  
  recursive = 2
  code.field = select_key
  allowCaching = {$plugin.tt_news.allowCaching}
  limit = 5
  latestLimit = 3
  backPid = 

  # search 
  searchPid = 
  emptySearchAtStart = 1
  
  # add target to links
  itemLinkTarget = 
  
  # mediafiles
  newsFiles {
    path = uploads/media/
    icon = 1
    stdWrap.wrap =   | <br />
  }
  
  # Rendering of news items. re-use the RTE parseFunc configuration for normal content 
  general_stdWrap {
    parseFunc < tt_content.text.20.parseFunc
  }
  

  # Pagebrowser settings
  pageBrowser {
    maxPages = 10
	# set this to '0' if you want the pagebrowser to display only numbers 
	showPBrowserText = 1 
	tableParams = cellpadding=2 
	showResultCount = 1
  }
    
  # Category settings
  catImageMode = {$plugin.tt_news.catImageMode}
  catTextMode = {$plugin.tt_news.catTextMode}
  maxCatImages = 10
  maxCatTexts = 10
  
  # category modes:
  # 0 = don't care about category selections
  # 1 = display selected categories 
  # -1 = display deselected categories
  categoryMode = 0
  
  catImageMaxWidth = 25
  catImageMaxHeight = 25
    
  # Archive settings
  datetimeDaysToArchive = 0
  enableArchiveDate = 1
  pageTypoLink.parameter.current = 1

  # Settings for links in 'LIST' & 'LATEST' to internal or external pages
  # comment this out, if you use frames, to avoid opening links in the current frameset which will result in an error   
  # pageTypoLink.target = _top
  
  reverseAMenu = 1
  archiveMenuNoEmpty = 1
  archiveTitleCObject = COA
  archiveTitleCObject {
    10 = TEXT
    10.field = start
    10.strftime = %B %Y
  }

  archiveEmptyMsg_stdWrap.wrap =
  searchEmptyMsg_stdWrap.wrap =
  
  ### Settings for Related News:
  relatedHeader_stdWrap.wrap = <strong>|</strong>
  
  # icon for related news
  tmp.5 = IMAGE
  tmp.5 {
    file = EXT:tt_news/ext_icon.gif 
    file.width = 11
    file.height = 12
    wrap = | &nbsp;
  }

  # end-wrap for the getRelated objects
  tmp.20 = TEXT 
  tmp.20 {
    field = datetime
    strftime = %d-%m-%y %H:%M
    wrap = &nbsp;-&nbsp; | <br /> 
  }

  # Build the list of related news:
  getRelatedCObject = COA
  getRelatedCObject {
 
    # groupBy = 
    orderBy = datetime desc
  
    10=CASE
    10.key.field=type
    # settings for 'normal' related news
    10.default=COA
      10.default {
        5 < plugin.tt_news.tmp.5
        10 = TEXT
        10.field = title
        10.typolink.parameter = {$plugin.tt_news.singlePid}
        10.typolink.additionalParams.data=register:newsAddParams 
        10.wrap = |
        20 < plugin.tt_news.tmp.20
      }   
	# settings for related news, that point to internal pages  
    10.1=COA
    10.1 {
      5 < plugin.tt_news.tmp.5
      5.file=EXT:tt_news/res/tt_news_article.gif
      10 = TEXT
      10.field = title
      10.typolink.parameter.field = page
      10.wrap = |
      20 < plugin.tt_news.tmp.20
    }
    # settings for related news, that point to external URLs     
    10.2=COA
    10.2 {
      5 < plugin.tt_news.tmp.5
      5.file=EXT:tt_news/res/tt_news_exturl.gif 
      10 = TEXT
      10.field = title
      10.typolink.parameter.field = ext_url 
      10.wrap = |
      20 < plugin.tt_news.tmp.20
    }
  }
  


  # rendering of SINGLE news
  displaySingle {
    age_stdWrap.age = 1
    textNewsAge_stdWrap.wrap =
    date_stdWrap.strftime= %d/%m/%y
    time_stdWrap.strftime= %H:%M
    title_stdWrap.wrap = 
    subheader_stdWrap.wrap = 
    author_stdWrap.typolink.parameter.field = author_email
    links_stdWrap.wrap =

    noNewsIdMsg_stdWrap = 
    imageCount=2
	imgAltTextField = imagecaption
    imageWrapIfAny = <div class="news-single-images-container"> | </div>

    email_stdWrap.setContentToCurrent = 1
    email_stdWrap.typolink.parameter.current = 1
    caption_stdWrap.wrap = <div class="news-single-imgcaption"> | </div>
    caption_stdWrap.trim=1
    caption_stdWrap.required=1
  }
  displaySingle.image {
    file.maxW = 200
    file.maxH = 150
    wrap = | <br />
    imageLinkWrap = 1
    imageLinkWrap {
      enable = 1
      bodyTag = <body bgColor="#ffffff">
      wrap = <a href="javascript:close();"> | </a>
      width = 400m
      height = 400

      JSwindow = 1
      JSwindow.newWindow = 1
      JSwindow.expand = 17,20
    }
    stdWrap.spaceAfter=0
  }

  # rendering of LATEST news
  displayLatest {
    age_stdWrap.age = 1
    date_stdWrap.strftime= %d/%m/%y
    time_stdWrap.strftime= %H:%M
    caption_stdWrap.if.directReturn = 0
    subheader_stdWrap.crop = 100 | ...
    subheader_stdWrap.ifEmpty.field = bodytext
    imageCount=1
	imgAltTextField = imagecaption
  }
  displayLatest.image < displaySingle.image
  displayLatest.image {
    file.maxW = 60
    file.maxH = 45
    imageLinkWrap = 1
    stdWrap.spaceAfter = 0
  }

  # rendering of LIST news
  displayList {
    age_stdWrap.age = 1
    textNewsAge_stdWrap.wrap =
    date_stdWrap.strftime= %A %d. of %B %Y
    time_stdWrap.strftime= %d/%m/%y %H:%M
    caption_stdWrap.wrap = <span class="news-list-imgcaption"> | </span>
    caption_stdWrap.trim=1
    caption_stdWrap.required=1
    title_stdWrap.wrap = 
    subheader_stdWrap.wrap = 
    subheader_stdWrap.crop = 300 | ...
    subheader_stdWrap.ifEmpty.field = bodytext
    author_stdWrap.wrap = 
    imageCount=1
    imageWrapIfAny = 
	imgAltTextField = imagecaption
  }
  displayList.image < displaySingle.image
  displayList.image {
    file.maxW = 120
    file.maxH = 90
    imageLinkWrap = 1
    stdWrap.spaceAfter=0
  }
  # Example for overriding values from locallang.php with other values
  _LOCAL_LANG.de {
    # more = [weiterlesen...]
  }

}


